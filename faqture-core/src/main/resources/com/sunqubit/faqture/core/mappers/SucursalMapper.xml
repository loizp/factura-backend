<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD//Mapper 3.0//EN' 'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>
<mapper namespace="com.sunqubit.faqture.core.mappers.SucursalMapper">
    <resultMap id="SucursalMap" type="Sucursal">
        <id column="sucu_id" property="id" />
        <result column="sucu_direccion" property="direccion" />
        <result column="sucu_status" property="activo" />
        <association property="contribuyente" javaType="Contribuyente" resultMap="com.sunqubit.faqture.core.mappers.ContribuyenteMapper.ContribuyenteMap"/>
        <association property="ubigeo" javaType="Ubigeo" resultMap="com.sunqubit.faqture.core.mappers.UbigeoMapper.UbigeoMap"/>
        <association property="pais" javaType="Pais" resultMap="com.sunqubit.faqture.core.mappers.PaisMapper.PaisMap"/>
        <collection property="documentos" javaType="Documento" resultMap="com.sunqubit.faqture.core.mappers.DocumentoMapper.DocumentoMap" />
    </resultMap>

    <insert id="insert" parameterType="Sucursal">
    	INSERT INTO sunqubit.sucursales (cont_id, sucu_direccion
    		<if test="activo != null">, sucu_status</if>
    		<if test="ubigeo.id != null">, ubig_id</if>
    		)
			VALUES (#{contribuyente.id}, #{direccion}
			<if test="activo != null">, #{activo}</if>
			<if test="ubigeo.id != null">, #{ubigeo.id}</if>
			);
	</insert>
    
    <select id="update" parameterType="Sucursal">
        UPDATE sunqubit.sucursales
			SET sucu_direccion=#{direccion}
			<if test="ubigeo.id != null">, ubig_id = #{ubigeo.id}</if>
			<if test="activo != null">, sucu_status = #{activo}</if>
			WHERE id = #{id};
    </select>

</mapper>
